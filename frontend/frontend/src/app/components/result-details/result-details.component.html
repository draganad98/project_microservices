<div class="result-details-container">

  <table class="answers-table">
    <thead>
      <tr>
        <th>#</th>
        <th>Question</th>
        <th>Your answer</th>
        <th>Correct answer</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let a of answers; let i = index">
        <td>{{ (page - 1) * pageSize + i + 1 }}</td>
        <td>{{ a.questionText }}</td>

        <td>
          <ng-container [ngSwitch]="a.questionType">
            <span *ngSwitchCase="'fillBlank'">{{ a.userTextAnswer }}</span>
            <span *ngSwitchCase="'trueFalse'">{{ a.correct }}</span>
            <span *ngSwitchDefault>
              <div *ngFor="let c of a.choices">
                <span *ngIf="a.userChoiceIds.includes(c.id)">{{ c.text }}</span>
              </div>
            </span>
          </ng-container>
        </td>

        <td>
          <ng-container [ngSwitch]="a.questionType">
            <span *ngSwitchCase="'fillBlank'">{{ a.correctTextAnswer }}</span>
            <span *ngSwitchCase="'trueFalse'">{{ a.correctTrueFalse }}</span>
            <span *ngSwitchDefault>
              <div *ngFor="let c of a.choices">
                <span *ngIf="c.isCorrect">{{ c.text }}</span>
              </div>
            </span>
          </ng-container>
        </td>

        <td [ngClass]="{ correct: a.isCorrect, wrong: !a.isCorrect }">
          {{ a.isCorrect ? '✅' : '❌' }}
        </td>
      </tr>
    </tbody>
  </table>
    

  <div class="pagination">
    <button [disabled]="page === 1" (click)="changePage(page - 1)">Previous</button>
    <span>Page {{ page }} of {{ Math.ceil(totalAnswers / pageSize) }}</span>
    <button [disabled]="page * pageSize >= totalAnswers" (click)="changePage(page + 1)">Next</button>
  </div>
  <div class="post-quiz-actions" style="margin-top: 20px; display: flex; gap: 10px; justify-content: center;">
  <button routerLink="/user/home">Home</button>
  <button routerLink="/user/results">Back</button>
</div>
  

</div>
