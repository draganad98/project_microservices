<div class="update-quiz-container">
  <div class="quiz-header">
    <h2>Update Quiz</h2>
    <button class="close-button" [routerLink]="['/admin/home']">Close</button>
  </div>


  <div class="top-panels">

    <div class="left-panel">
      <form [formGroup]="quizForm" class="quiz-form">
        <mat-form-field appearance="fill" class="quiz-field">
          <mat-label>Title</mat-label>
          <input matInput formControlName="title" required>
        </mat-form-field>

        <mat-form-field appearance="fill" class="quiz-field">
          <mat-label>Time Limit (seconds)</mat-label>
          <input matInput type="number" formControlName="timeLimitSeconds" required>
        </mat-form-field>

        <mat-form-field appearance="fill" class="quiz-field">
          <mat-label>Description</mat-label>
          <textarea matInput formControlName="description" rows="5"></textarea>
        </mat-form-field>

        <mat-form-field appearance="fill" class="quiz-field">
          <mat-label>Difficulty Level</mat-label>
          <mat-select formControlName="difficultyLevel">
            <mat-option value="Easy">Easy</mat-option>
            <mat-option value="Medium">Medium</mat-option>
            <mat-option value="Hard">Hard</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill" class="quiz-field">
          <mat-label>Categories</mat-label>
          <mat-select formControlName="categoryIds" multiple>
            <mat-option *ngFor="let cat of categories" [value]="cat.id">{{ cat.name }}</mat-option>
          </mat-select>
        </mat-form-field>

        <button mat-raised-button color="accent" type="button" (click)="openAddQuestion()">Add Question</button>
        <button mat-raised-button color="primary" type="button" (click)="onUpdate()">Update Quiz</button>
      </form>
    </div>

 
    <div class="right-panel" *ngIf="showAddQuestion">
      <app-add-question
        (done)="addQuestion($event)"
        (close)="closeAddQuestion()">
      </app-add-question>
    </div>
  </div>


  <div class="questions-table-container">
    <h3>Added Questions</h3>
    <table mat-table [dataSource]="questionsDataSource" class="mat-elevation-z8 full-width-table">
      <ng-container matColumnDef="no">
        <th mat-header-cell *matHeaderCellDef>No</th>
        <td mat-cell *matCellDef="let q; let i = index">{{ i + 1 }}</td>
      </ng-container>

      <ng-container matColumnDef="text">
        <th mat-header-cell *matHeaderCellDef>Text</th>
        <td mat-cell *matCellDef="let q">{{ q.text }}</td>
      </ng-container>

      <ng-container matColumnDef="points">
        <th mat-header-cell *matHeaderCellDef>Points</th>
        <td mat-cell *matCellDef="let q">{{ q.points }}</td>
      </ng-container>

      <ng-container matColumnDef="type">
        <th mat-header-cell *matHeaderCellDef>Type</th>
        <td mat-cell *matCellDef="let q">{{ q.type }}</td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let q; let i = index">
          <button mat-icon-button color="warn" (click)="removeQuestion(i)">
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <p *ngIf="questions.length === 0" class="no-questions">
      No questions added yet.
    </p>
  </div>
</div>

